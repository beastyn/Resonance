[gd_scene load_steps=15 format=3 uid="uid://0gkxpox83pku"]

[ext_resource type="Script" uid="uid://buxsy5g688tc3" path="res://scripts/enemy.gd" id="1_7p1mj"]
[ext_resource type="PackedScene" uid="uid://bcn67q5m76yr4" path="res://scenes/tentacle.tscn" id="1_md0e3"]
[ext_resource type="Shader" uid="uid://dt3sqcbbucu3c" path="res://assets/infected-sprite.gdshader" id="2_nenq2"]
[ext_resource type="Texture2D" uid="uid://cd11xrhrx0y0c" path="res://assets/enemy_animation.png" id="3_nenq2"]
[ext_resource type="PackedScene" uid="uid://b3hsk82kmoi5h" path="res://scenes/wave_area.tscn" id="4_xwavj"]
[ext_resource type="Resource" uid="uid://buxceg7w6xwlh" path="res://scripts/data/waves/enemy_wave.tres" id="6_nenq2"]
[ext_resource type="PackedScene" uid="uid://djx105ra2auwd" path="res://scenes/components/effects/destruction_anim_resonance.tscn" id="7_nenq2"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_md484"]
shader = ExtResource("2_nenq2")
shader_parameter/tint_color = Color(0.7926997, 0.21623817, 0.2632554, 0.8)
shader_parameter/mix_tint = 0.7
shader_parameter/side_top = 1.0
shader_parameter/side_right = 1.0
shader_parameter/side_bottom = 1.0
shader_parameter/side_left = 1.0
shader_parameter/thickness_px = 200.0
shader_parameter/soften_px = 4.26000020235
shader_parameter/pulse_speed = 20.00000095
shader_parameter/pulse_freq = 40.0
shader_parameter/pulse_amp = 0.07999999821186
shader_parameter/edge_fade = 0.85
shader_parameter/noise_seed = 4.00000019
shader_parameter/distortion_strength = 6.2800002983

[sub_resource type="AtlasTexture" id="AtlasTexture_ipns3"]
atlas = ExtResource("3_nenq2")
region = Rect2(0, 0, 200, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_8qclf"]
atlas = ExtResource("3_nenq2")
region = Rect2(200, 0, 200, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_w8i8w"]
atlas = ExtResource("3_nenq2")
region = Rect2(400, 0, 200, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_otmr2"]
atlas = ExtResource("3_nenq2")
region = Rect2(600, 0, 200, 100)

[sub_resource type="SpriteFrames" id="SpriteFrames_wtq4b"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ipns3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8qclf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w8i8w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_otmr2")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_md484"]
size = Vector2(217, 90)

[node name="Enemy" type="Node2D" node_paths=PackedStringArray("tentacles", "timer")]
z_index = 1
script = ExtResource("1_7p1mj")
tentacles = [NodePath("Tentacle"), NodePath("Tentacle2"), NodePath("Tentacle3")]
timer = NodePath("Timer")
attack_lag = 2.0
attack_time = 4.0
retract_time = 0.5

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
material = SubResource("ShaderMaterial_md484")
sprite_frames = SubResource("SpriteFrames_wtq4b")
autoplay = "default"
frame_progress = 0.620684

[node name="Timer" type="Timer" parent="."]

[node name="Tentacle" parent="." instance=ExtResource("1_md0e3")]
position = Vector2(-55, 63)
segments_number = 10
limit_max_length = 10.0
max_length = 650.0
width = 3.0
wave_frequency = 10.0
fire_sec = 2.0
retract_sec = 1.0

[node name="Tentacle2" parent="." instance=ExtResource("1_md0e3")]
position = Vector2(55, 60)
segments_number = 10
limit_max_length = 10.0
max_length = 610.0
width = 3.0
wave_frequency = 5.0
fire_sec = 2.0
retract_sec = 1.0

[node name="Tentacle3" parent="." instance=ExtResource("1_md0e3")]
position = Vector2(0, 60)
segments_number = 10
limit_max_length = 10.0
max_length = 600.0
width = 3.0
wave_amplitude = 1.0
wave_frequency = 0.5
fire_sec = 2.0
retract_sec = 1.0

[node name="WaveArea" parent="." instance=ExtResource("4_xwavj")]
default_wave_resource = ExtResource("6_nenq2")

[node name="CollisionShape2D" type="CollisionShape2D" parent="WaveArea"]
position = Vector2(4.5, 14)
shape = SubResource("RectangleShape2D_md484")

[node name="DestructionAnimResonance" parent="WaveArea" node_paths=PackedStringArray("parent_node", "sprite") instance=ExtResource("7_nenq2")]
parent_node = NodePath("../..")
sprite = NodePath("../../AnimatedSprite2D")

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
